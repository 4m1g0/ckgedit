CKEDITOR.plugins.add("signature",{init:function(a){a.addCommand("insertSignature",{numbersToTwoDigits:function(b){if(b<10){b="0"+b}return(b)},exec:function(f){var g=oDokuWiki_FCKEditorInstance.fckgUserName;var e=oDokuWiki_FCKEditorInstance.fckgUserMail;var h=new Date();var b=h.getFullYear()+"/"+this.numbersToTwoDigits(h.getMonth()+1)+"/"+this.numbersToTwoDigits(h.getDate())+" "+this.numbersToTwoDigits(h.getHours())+":"+this.numbersToTwoDigits(h.getMinutes());var c='&mdash; <i><a href="mailto:'+e+'">'+g+"</a> "+b+" &mdash;</i>";f.insertHtml(c)}});a.ui.addButton("Signature",{label:"Insert signature",command:"insertSignature",icon:this.path+"images/sig.png"})}});